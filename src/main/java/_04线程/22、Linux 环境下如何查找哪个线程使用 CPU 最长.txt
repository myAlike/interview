22、Linux 环境下如何查找哪个线程使用 CPU 最长

这是一个比较偏实践的问题，这种问题我觉得挺有意义的。可以这么做：
（1）获取项目的 pid，jps 或者 ps -ef | grep java，这个前面有讲过
（2）top -H -p pid，顺序不能改变 这样就可以打印出当前的项目，每条线程占用 CPU 时间的百分比。注意这里 打出的是 LWP， 也就是操作系统原生线程的线程号， 我笔记本山没有部署
Linux 环境下的 Java 工程，因此没有办法截图演示，网友朋友们如果公司是 使用 Linux 环境部署项目的话，可以尝试一下。
使用"top -H -p pid"+"jps pid"可以很容易地找到某条占用 CPU 高的线程的 线程堆栈，从而定位占用 CPU 高的原因，一般是因为不当的代码操作导致了 死循环。
最后提一点，"top -H -p pid"打出来的 LWP 是十进制的，"jps pid"打出来 的本地线程号是十六进制的，转换一下，就能定位到占用 CPU 高的线程的当 前线程堆栈了。